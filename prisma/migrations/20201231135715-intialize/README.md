# Migration `20201231135715-intialize`

This migration has been generated by nouman at 12/31/2020, 6:57:15 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Lesson" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "description" TEXT NOT NULL,
    "postedById" INTEGER,

    FOREIGN KEY ("postedById") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE
)

CREATE TABLE "Multimedia" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "url" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "lessonId" INTEGER,

    FOREIGN KEY ("lessonId") REFERENCES "Lesson"("id") ON DELETE SET NULL ON UPDATE CASCADE
)

CREATE TABLE "User" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "password" TEXT NOT NULL
)

CREATE TABLE "WatchSymbols" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "symbol" TEXT NOT NULL,
    "minAmount" TEXT NOT NULL DEFAULT '',
    "maxAmount" TEXT NOT NULL DEFAULT '',
    "phone" TEXT NOT NULL DEFAULT '',
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "postedById" INTEGER,

    FOREIGN KEY ("postedById") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE
)

CREATE TABLE "notification" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "msg" TEXT NOT NULL DEFAULT '',
    "phone" TEXT NOT NULL DEFAULT '',
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "sent" BOOLEAN NOT NULL DEFAULT false,
    "status" TEXT NOT NULL DEFAULT 'PENDING',
    "onceDaily" TEXT NOT NULL
)

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")

CREATE UNIQUE INDEX "notification.onceDaily_unique" ON "notification"("onceDaily")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201231135715-intialize
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,60 @@
+datasource db {
+    provider = "sqlite"
+    url = "***"
+  
+}
+
+generator client {
+    provider = "prisma-client-js"
+}
+
+model Lesson {
+    id          Int          @id @default(autoincrement())
+    createdAt   DateTime     @default(now())
+    description String
+    postedById  Int?
+    postedBy    User?        @relation(fields: [postedById], references: [id])
+    multimedia  Multimedia[]
+
+}
+
+model Multimedia {
+    id        Int      @id @default(autoincrement())
+    url       String
+    createdAt DateTime @default(now())
+    lesson    Lesson?  @relation(fields: [lessonId], references: [id])
+    lessonId  Int?
+
+}
+
+model User {
+    id       Int      @id @default(autoincrement())
+    name     String
+    email    String   @unique
+    password String
+    lessons  Lesson[]
+    watchSymbols WatchSymbols[]
+}
+
+model WatchSymbols {
+    id          Int          @id @default(autoincrement())
+    symbol      String
+    minAmount      String       @default("")
+    maxAmount      String       @default("")
+    phone       String       @default("")
+    createdAt   DateTime     @default(now())
+    postedById  Int?
+    postedBy    User?        @relation(fields: [postedById], references: [id])
+  
+}
+
+
+model notification {
+    id          Int          @id @default(autoincrement())
+    msg         String       @default("")
+    phone       String       @default("")
+    createdAt   DateTime     @default(now())
+    sent        Boolean      @default(false)
+    status      String       @default("PENDING")
+    onceDaily   String       @unique
+}
```


